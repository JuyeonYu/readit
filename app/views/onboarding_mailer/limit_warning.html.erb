<% content_for :preheader do %>
  Your limit resets on <%= @reset_date.strftime("%B %d") %>, or upgrade to Pro for unlimited.
<% end %>

<!-- Heading -->
<h1 style="margin: 0 0 24px; font-size: 24px; font-weight: 700; color: #111827;">
  Quick heads up
</h1>

<p style="margin: 0 0 24px; font-size: 16px; color: #374151; line-height: 1.6;">
  Hi <%= @name %>,
</p>

<p style="margin: 0 0 24px; font-size: 16px; color: #374151; line-height: 1.6;">
  You've used <strong style="color: #111827;"><%= @messages_used %> of <%= @message_limit %></strong> free messages this month.
</p>

<!-- Progress bar -->
<div style="background-color: #f3f4f6; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
    <span style="font-size: 14px; color: #6b7280;">Messages used</span>
    <span style="font-size: 14px; font-weight: 600; color: #111827;"><%= @messages_used %>/<%= @message_limit %></span>
  </div>
  <div style="background-color: #e5e7eb; border-radius: 4px; height: 8px; overflow: hidden;">
    <div style="background-color: #F59E0B; height: 100%; width: <%= (@messages_used.to_f / @message_limit * 100).round %>%; border-radius: 4px;"></div>
  </div>
</div>

<p style="margin: 0 0 24px; font-size: 16px; color: #374151; line-height: 1.6;">
  Your limit resets on <strong><%= @reset_date.strftime("%B %d, %Y") %></strong>, or you can upgrade to Pro for unlimited messages.
</p>

<!-- CTA Button -->
<table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
  <tr>
    <td align="center">
      <a href="<%= pricing_url %>" style="display: inline-block; padding: 14px 32px; background-color: #4F46E5; color: #ffffff; font-size: 16px; font-weight: 600; text-decoration: none; border-radius: 8px;">
        View Pro Plans
      </a>
    </td>
  </tr>
</table>

<!-- Pro benefits -->
<p style="margin: 0 0 12px; font-size: 14px; color: #6b7280;">
  Pro gives you:
</p>

<ul style="margin: 0 0 32px; padding: 0 0 0 20px; font-size: 14px; color: #374151; line-height: 1.8;">
  <li>Unlimited messages</li>
  <li>Advanced analytics</li>
  <li>Priority support</li>
</ul>

<!-- No pressure -->
<p style="margin: 0 0 32px; font-size: 14px; color: #6b7280; font-style: italic;">
  No pressure! Just wanted you to know.
</p>

<!-- Divider -->
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 32px 0;">

<!-- Sign off -->
<p style="margin: 0; font-size: 14px; color: #374151;">
  Best,<br>
  The MessageOpen Team
</p>
